<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Fresh organic products directly from local farmers">
  <meta name="theme-color" content="#2D5016">

  <link rel="icon" type="image/png" href="" />
  <title>{% block title %}Fresh from Farm to Table{% endblock %}</title>

  <!-- Social Preview -->
  <meta property="og:title" content=" Fresh Organic Products">
  <meta property="og:description" content="Fresh organic products directly from local farmers">
  <meta property="og:image" content="">
  <meta property="og:type" content="website">
  <meta property="og:url" content="">

  <!-- Google Fonts - DM Sans -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- External CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/css/splide.min.css">
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'primary-green': '#2D5016',
            'secondary-green': '#4A7C59',
            'cta-orange': '#E67E22',
            'cta-orange-hover': '#D35400',
            'bg-cream': '#F5F1E8',
            'trust-blue': '#2C5F7C',
            'text-primary': '#2D5016',
            'text-body': '#374151',
            'text-secondary': '#6B7280',
          },
          fontFamily: {
            'sans': ['DM Sans', 'system-ui', 'sans-serif'],
          },
          borderRadius: {
            'organic': '2rem',
          },
        }
      }
    }
  </script>

  <!-- Theme Styles -->
  <style>
    :root {
      --primary-green: #2D5016;
      --secondary-green: #4A7C59;
      --cta-orange: #E67E22;
      --cta-orange-hover: #D35400;
      --bg-cream: #F5F1E8;
      --trust-blue: #2C5F7C;
      --text-primary: #2D5016;
      --text-body: #374151;
      --text-secondary: #6B7280;
      --shadow-sm: 0 2px 8px rgba(45, 80, 22, 0.08);
      --shadow-md: 0 4px 16px rgba(45, 80, 22, 0.12);
      --shadow-lg: 0 8px 24px rgba(45, 80, 22, 0.16);
      --shadow-xl: 0 12px 32px rgba(45, 80, 22, 0.20);
    }

    * {
      font-family: 'DM Sans', system-ui, sans-serif;
    }

    body {
      background-color: var(--bg-cream);
      color: var(--text-body);
    }

    /* Smooth scrolling */
    html {
      scroll-behavior: smooth;
    }


    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Scroll to Top Button */
    #scroll-to-top {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      width: 3.5rem;
      height: 3.5rem;
      background: var(--cta-orange);
      color: white;
      border-radius: 50%;
      display: none;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: var(--shadow-lg);
      transition: all 0.3s ease;
      z-index: 1000;
      border: none;
    }

    #scroll-to-top:hover {
      background: var(--cta-orange-hover);
      transform: translateY(-4px);
      box-shadow: var(--shadow-xl);
    }

    #scroll-to-top.show {
      display: flex;
    }

    /* Custom Scrollbar */
    ::-webkit-scrollbar {
      width: 12px;
      height: 12px;
    }

    ::-webkit-scrollbar-track {
      background: var(--bg-cream);
    }

    ::-webkit-scrollbar-thumb {
      background: var(--secondary-green);
      border-radius: 10px;
      border: 2px solid var(--bg-cream);
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--primary-green);
    }

    /* Firefox Scrollbar */
    html {
      scrollbar-color: var(--secondary-green) var(--bg-cream);
      scrollbar-width: thin;
    }
       /* Card Styles */
    .card {
      background: white;
      border-radius: 1.5rem;
      padding: 1.5rem;
      box-shadow: var(--shadow-sm);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
     /* Button Styles */
    .btn {
      padding: 0.875rem 2rem;
      border-radius: 3rem;
      font-weight: 600;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      border: none;
      outline: none;
      text-decoration: none;
      white-space: nowrap;
    }

 .type-badge {
      background: var(--trust-blue);
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 2rem;
      font-size: 0.875rem;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }

    @keyframes loading {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
      .btn {
        padding: 0.75rem 1.5rem;
        font-size: 0.875rem;
      }

      #scroll-to-top {
        bottom: 1.5rem;
        right: 1.5rem;
        width: 3rem;
        height: 3rem;
      }

      .price {
        font-size: 1.25rem;
      }

      .card {
        padding: 1rem;
      }
    }

    /* Print Styles */
    @media print {
      #scroll-to-top,
      .btn,
        #loading-overlay {
            display: none !important;
        }
    }
  </style>

  {% block extra_head %}{% endblock %}
</head>

<body class="min-h-screen flex flex-col">
  <!-- Loading Overlay -->
  <div id="loading-overlay">
    <div class="flex flex-col items-center gap-4">
      <div class="organic-spinner"></div>
      <p class="text-primary-green font-semibold text-lg">Loading fresh content...</p>
    </div>
  </div>

  <!-- Scroll to Top Button -->
  <button id="scroll-to-top" aria-label="Scroll to top">
    <i class="fas fa-arrow-up text-xl"></i>
  </button>

  <!-- Navbar -->
  {% include 'components/navbar_sameer.html' %}

  <!-- Main Content -->
<main class="flex-grow pt-20 pb-12 mt-1 sm:mt-1 md:mt-2 lg:mt-4 container mx-auto px-4"></main>
    {% block content %}{% endblock %}
  </main>



  <!-- External JS - jQuery First! -->
  <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/js/splide.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@splidejs/splide-extension-auto-scroll@0.5.3/dist/js/splide-extension-auto-scroll.min.js"></script>
<!-- SweetAlert2 Configuration -->
  <script>
      // Initialize Swiper video
  const swiper = new Swiper('.videoSwiper', {
    // Auto-slide every 5 seconds
    autoplay: {
      delay: 5000,
      disableOnInteraction: false,
      pauseOnMouseEnter: true,
    },

    // Enable loop
    loop: true,

    // Enable touch/swipe on mobile and desktop
    grabCursor: true,
    touchRatio: 1,
    touchAngle: 45,

    // Navigation arrows
    navigation: {
      nextEl: '.swiper-button-next',
      prevEl: '.swiper-button-prev',
    },


    // Events
    on: {
      slideChange: function () {
        // Pause all videos
        const videos = document.querySelectorAll('.video-slide');
        videos.forEach(video => {
          video.pause();
          video.currentTime = 0;
        });

        // Play the current video
        const activeSlide = this.slides[this.activeIndex];
        const activeVideo = activeSlide.querySelector('.video-slide');
        if (activeVideo) {
          activeVideo.play();
        }
      },
      init: function () {
        // Play the first video on init
        const firstVideo = this.slides[this.activeIndex].querySelector('.video-slide');
        if (firstVideo) {
          firstVideo.play();
        }
      }
    }
  });

  
document.addEventListener('DOMContentLoaded', function () {
    
    // 1. Initialize Testimonials (Target by class .splide)
    // Note: If you have more than one .splide class, use a unique ID instead.
    const testimonialSlider = new Splide('.splide:not(#logo-slider)', {
      type   : 'slide', // Changed from 'loop'
      rewind : false,
      pagination: false,
      perPage: 3,
      perMove: 1,
      gap    : '1rem',
      breakpoints: {
        1024: { perPage: 2 },
        768: { perPage: 1 },
      }
    });
    testimonialSlider.mount();

    // 2. Initialize Vendor/Logo Slider 
    const vendorSlider = new Splide('#logo-slider', {
      type   : 'loop',
      drag   : 'free',
      focus  : 'center',
      perPage: 5,
      arrows : false,
      pagination: false,
      gap    : '3rem',
      autoScroll: {
        speed: 1,
        pauseOnHover: true,
      },
      breakpoints: {
        768: { perPage: 3 },
        480: { perPage: 2 },
      }
    });
    
    // Mount with the AutoScroll extension
    vendorSlider.mount( window.splide.Extensions );
    
  });

    // Configure SweetAlert2 Toast
    const Toast = Swal.mixin({
      toast: true,
      position: 'top-end',
      showConfirmButton: false,
      timer: 3000,
      timerProgressBar: true,
      didOpen: (toast) => {
        toast.addEventListener('mouseenter', Swal.stopTimer)
        toast.addEventListener('mouseleave', Swal.resumeTimer)
      },
      customClass: {
        popup: 'rounded-2xl shadow-lg',
        title: 'text-sm font-semibold'
      }
    });

    // Django Messages Integration
    {% if messages %}
      {% for message in messages %}
        {% if message.tags == 'success' %}
          Toast.fire({
            icon: 'success',
            title: '{{ message|escapejs }}',
            background: '#D1FAE5',
            iconColor: '#059669'
          });
        {% elif message.tags == 'error' %}
          Toast.fire({
            icon: 'error',
            title: '{{ message|escapejs }}',
            background: '#FEE2E2',
            iconColor: '#DC2626'
          });
        {% elif message.tags == 'warning' %}
          Toast.fire({
            icon: 'warning',
            title: '{{ message|escapejs }}',
            background: '#FEF3C7',
            iconColor: '#D97706'
          });
        {% else %}
          Toast.fire({
            icon: 'info',
            title: '{{ message|escapejs }}',
            background: '#DBEAFE',
            iconColor: '#2563EB'
          });
        {% endif %}
      {% endfor %}
    {% endif %}
  </script>

  <!-- Core Utility Functions -->
  <script>
    // ===========================
    // LOADING OVERLAY FUNCTIONS
    // ===========================
    function showLoading(message = 'Loading fresh content...') {
      $('#loading-overlay').addClass('show');
      $('#loading-overlay p').text(message);
    }

    function hideLoading() {
      $('#loading-overlay').removeClass('show');
    }

    // ===========================
    // NOTIFICATION FUNCTIONS
    // ===========================
    function showSuccess(message) {
      Toast.fire({
        icon: 'success',
        title: message,
        background: '#D1FAE5',
        iconColor: '#059669'
      });
    }

    function showError(message) {
      Toast.fire({
        icon: 'error',
        title: message,
        background: '#FEE2E2',
        iconColor: '#DC2626'
      });
    }

    function showWarning(message) {
      Toast.fire({
        icon: 'warning',
        title: message,
        background: '#FEF3C7',
        iconColor: '#D97706'
      });
    }

    function showInfo(message) {
      Toast.fire({
        icon: 'info',
        title: message,
        background: '#DBEAFE',
        iconColor: '#2563EB'
      });
    }

    // ===========================
    // CONFIRMATION DIALOG
    // ===========================
    function confirmAction(title, text, confirmButtonText = 'Yes, proceed') {
      return Swal.fire({
        title: title,
        text: text,
        icon: 'question',
        showCancelButton: true,
        confirmButtonText: confirmButtonText,
        cancelButtonText: 'Cancel',
        reverseButtons: true,
        customClass: {
          confirmButton: 'btn btn-primary mx-2',
          cancelButton: 'btn btn-outline mx-2'
        },
        buttonsStyling: false
      });
    }

    // ===========================
    // SCROLL FUNCTIONS
    // ===========================
    function smoothScrollTo(elementId) {
      const element = $('#' + elementId);
      if (element.length) {
        $('html, body').animate({
          scrollTop: element.offset().top - 100
        }, 600);
      }
    }

    // Scroll to top button
    $(window).scroll(function() {
      if ($(this).scrollTop() > 300) {
        $('#scroll-to-top').addClass('show');
      } else {
        $('#scroll-to-top').removeClass('show');
      }
    });

    $('#scroll-to-top').click(function() {
      $('html, body').animate({ scrollTop: 0 }, 600);
    });

    // ===========================
    // CART FUNCTIONS
    // ===========================
    function addToCartAnimation(button) {
      const $btn = $(button);
      const originalHTML = $btn.html();
      
      $btn.html('<i class="fas fa-check"></i> Added!');
      $btn.addClass('!bg-green-500');
      
      setTimeout(() => {
        $btn.html(originalHTML);
        $btn.removeClass('!bg-green-500');
      }, 2000);
    }

    function updateCartBadge(count) {
      const $badge = $('.cart-badge');
      if (count > 0) {
        $badge.text(count).show();
      } else {
        $badge.hide();
      }
    }

 
    // ===========================
    // QUANTITY SELECTOR
    // ===========================
    function initQuantitySelectors() {
      $(document).on('click', '.quantity-selector .btn-decrease', function() {
        const $input = $(this).siblings('input');
        let value = parseInt($input.val()) || 1;
        if (value > 1) {
          $input.val(value - 1).trigger('change');
        }
      });

      $(document).on('click', '.quantity-selector .btn-increase', function() {
        const $input = $(this).siblings('input');
        let value = parseInt($input.val()) || 1;
        const max = parseInt($input.attr('max')) || 999;
        if (value < max) {
          $input.val(value + 1).trigger('change');
        }
      });
    }

    // ===========================
    // CURRENCY FORMATTING
    // ===========================
    function formatCurrency(amount) {
      return 'Rs. ' + parseFloat(amount).toLocaleString('en-NP', {
        minimumFractionDigits: 2,
        maximumFractionDigits: 2
      });
    }

    // ===========================
    // IMAGE LAZY LOADING
    // ===========================
    function initLazyLoading() {
      if ('IntersectionObserver' in window) {
        const imageObserver = new IntersectionObserver((entries, observer) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              const img = entry.target;
              img.src = img.dataset.src;
              img.classList.remove('image-placeholder');
              observer.unobserve(img);
            }
          });
        });

        $('.lazy-load').each(function() {
          imageObserver.observe(this);
        });
      }
    }

    // Initialize functions on document ready
    $(document).ready(function() {
      initQuantitySelectors();
      initLazyLoading();
    });
    </script>
    {% block extra_scripts %}{% endblock %}
</body>
</html>